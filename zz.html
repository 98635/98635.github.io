<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>考研政治时间轴</title>
  <style>
    body {
      font-family: "Helvetica Neue", sans-serif;
      margin: 20px;
      overflow-x: hidden;
    }
    h1 {
      text-align: center;
      margin-bottom: 10px;
    }
    .controls, .zoom-controls {
      text-align: center;
      margin-bottom: 10px;
    }
    .controls button, .zoom-controls button {
      margin: 5px;
      padding: 8px 14px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      background-color: #007bff;
      color: white;
      transition: background-color 0.3s;
    }
    .controls button:hover, .zoom-controls button:hover {
      background-color: #0056b3;
    }
    .timeline-wrapper {
      overflow-x: auto;
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 10px 0;
      max-width: 100%;
      user-select: none;
      white-space: nowrap;
      position: relative;
      height: 320px;
    }
    .timeline {
      position: relative;
      height: 320px;
      min-width: 1000px;
    }
    .year {
      position: absolute;
      top: 0;
      width: 80px;
      text-align: center;
      font-weight: bold;
      color: #333;
      user-select: none;
    }
    .year::after {
      content: '';
      position: absolute;
      height: 10px;
      width: 2px;
      background: #333;
      top: 30px;
      left: 50%;
      transform: translateX(-50%);
    }
 .entry {
  position: absolute;
  padding: 6px 10px;
  border-radius: 8px;
  white-space: nowrap;
  font-size: 13px;
  cursor: pointer;
  user-select: none;
  margin-right: 8px;
  border: 2px solid #444;           /* 加粗边框，颜色更深 */
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.4);  /* 更强阴影 */
  background-clip: padding-box;
  background-color: inherit;        /* 保持原背景色 */
  transition: border-color 0.3s, box-shadow 0.3s;
}

    .event { background: #ffc107; color: black; }
    .period {
  background: #28a745;
  color: white;
  height: 26px;
  line-height: 26px;
  border-radius: 8px;
  margin-right: 8px;
  border: 2px solid #1f7a33;
  box-shadow: 0 0 12px rgba(31, 122, 51, 0.7);
  display: inline-block;
}

.task {
  background: #007bff;                /* 主色：蓝色 */
  color: white;
  height: 26px;
  line-height: 26px;
  border-radius: 8px;
  margin-right: 8px;
  border: 2px solid #0056b3;          /* 深蓝边框 */
  box-shadow: 0 0 12px rgba(0, 123, 255, 0.6);  /* 蓝色光晕 */
  display: inline-block;
}
    .writing { background: #17a2b8; color: white; }
    .meeting { background: #6f42c1; color: white; }
    .significance { background: #132545; color: white; }
	.nationalCondition { background: #ffa07a; color: white; }
 
    .hidden { display: none !important; }

    /* tooltip 样式 */
    .entry:hover {
  border-color: #222;
  box-shadow: 0 0 15px rgba(0, 0, 0, 0.7);
}
    .tooltip {
      display: none;
      position: absolute;
      top: -60px;
      left: 0;
      background: rgba(0, 0, 0, 0.85);
      color: #fff;
      padding: 6px 10px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 10;
      width: 200px;
      white-space: normal;
      pointer-events: none;
    }
    .tooltip::after {
      content: '';
      position: absolute;
      top: 100%;
      left: 10px;
      border-width: 6px;
      border-style: solid;
      border-color: rgba(0, 0, 0, 0.85) transparent transparent transparent;
    }

    /* 弹窗 */
    #popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      width: 320px;
      background: white;
      border: 1px solid #ccc;
      box-shadow: 0 0 15px rgba(0,0,0,0.3);
      border-radius: 8px;
      padding: 20px;
      transform: translate(-50%, -50%);
      z-index: 1000;
      user-select: text;
    }
    #popup h3 {
      margin-top: 0;
      margin-bottom: 10px;
      font-weight: bold;
      font-size: 18px;
      color: #333;
    }
    #popup p {
      margin-bottom: 20px;
      line-height: 1.4;
      color: #555;
    }
    #popup button {
      background: #007bff;
      border: none;
      color: white;
      padding: 8px 14px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }
    #popup button:hover {
      background: #0056b3;
    }
	#popup {
  max-height: 70vh;         /* 弹窗最大高度为视口的 70% */
  overflow-y: auto;         /* 超出时显示垂直滚动条 */
}
	.search-container {
  text-align: center;
  margin-bottom: 10px;
}
.search-container input {
  padding: 6px;
  font-size: 14px;
  width: 220px;
  margin-right: 5px;
}
.search-container button {
  padding: 6px 12px;
  font-weight: bold;
  background-color: #28a745;
  border: none;
  color: white;
  border-radius: 4px;
  cursor: pointer;
}
.search-container button:hover {
  background-color: #1e7e34;
}
.entry.highlight {
  outline: 3px solid red;
  z-index: 10;
}
.separator-line {
  position: absolute;
  left: 0;
  width: 100%;
  height: 1px;
  background-color: #ccc;
  z-index: 0;
}
.btn-toggled {
  filter: brightness(130%);
  opacity: 0.6;
}
  </style>
</head>



<body>

  <h1>考研政治时间轴</h1>
  <div class="search-container">
  <input type="text" id="searchInput" placeholder="输入关键词搜索事件…" />
    <button onclick="searchPrev()">上一条</button>
  <button onclick="searchNext()">下一条</button>
  <span id="searchInfo" style="margin-left: 15px; color: #28a745; font-weight: bold;"></span>
</div>

<div class="controls">
 <button style="background-color:#ffc107; color:#000;" onclick="toggleCategory('event', this)">切换 历史事件</button>
<button style="background-color:#28a745; color:#fff;" onclick="toggleCategory('period', this)">切换 历史时期</button>
<button style="background-color:#17a2b8; color:#fff;" onclick="toggleCategory('writing', this)">切换 毛泽东著作</button>
<button style="background-color:#6f42c1; color:#fff;" onclick="toggleCategory('meeting', this)">切换 重要会议</button>
<button style="background-color:#132545; color:#fff;" onclick="toggleCategory('significance', this)">切换 历史意义</button>
<button style="background-color:#ffa07a; color:#000;" onclick="toggleCategory('nationalCondition', this)">切换 国情</button>
<button style="background-color:#87cefa; color:#000;" onclick="toggleCategory('task', this)">切换 任务</button>
</div>
  <div class="zoom-controls">
    <button onclick="zoomTimeline(1.2)">放大时间轴</button>
    <button onclick="zoomTimeline(0.8)">缩小时间轴</button>
    <button onclick="resetZoom()">重置缩放</button>
 </div>
 
<div style="text-align:center; margin-bottom:15px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
  <label style="font-weight: 600; font-size: 14px; margin-right: 8px;">
    开始年份:
    <input
      type="number"
      id="exportStartYear"
      value="1940"
      min="1820"
      max="2050"
      style="width:90px; padding:4px 6px; margin-left:4px; border:1px solid #ccc; border-radius:4px; font-size:14px;"
    >
  </label>
  <label style="font-weight: 600; font-size: 14px; margin-left:15px; margin-right: 8px;">
    结束年份:
    <input
      type="number"
      id="exportEndYear"
      value="1978"
      min="1820"
      max="2050"
      style="width:90px; padding:4px 6px; margin-left:4px; border:1px solid #ccc; border-radius:4px; font-size:14px;"
    >
  </label>
  <button
    onclick="exportTimelineRange()"
    style="background-color: #28a745; color: white; font-weight: 600; border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; font-size: 14px; transition: background-color 0.3s;"
    onmouseover="this.style.backgroundColor='#218838'"
    onmouseout="this.style.backgroundColor='#28a745'"
  >
    导出选定区间截图
  </button>
</div>

  <div class="timeline-wrapper" id="timeline-wrapper">
    <div class="timeline" id="timeline"></div>
  </div>

  <div id="popup">
    <h3 id="popup-title"></h3>
    <p id="popup-desc"></p >
    <button onclick="closePopup()">关闭</button>
  </div>

<script>

  const data = {
  //---------------------------------------------------------------------------------------------------------------------------------------------------
  tasks: [
  
  { start: 2000, end: 2005, label: "西部大开发", description:{
      background: "中华人民共和国成立背景：1949年新中国成立。",
      contents: [
        "标志中国进入社会主义初级阶段。",
        "是新中国成立的重要标志是新中是新中国成立的重要标志。是新中国成立的重要标志。国成立的重要标志。是新中国成立的重要标志。是要标。",
        "开启中国社会主义新纪元。"]} }








],

  //---------------------------------------------------------------------------------------------------------------------------------------------------
    events: [

 
{
  year: 1840,
  label: "鸦片战争",
  description: {
    background: "19世纪上半叶，英国等西方资本主义国完成工业革命，急需开拓海外市场和掠夺原料。中国处于封建社会末期，以自然经济为主，政治腐败，军事落后，成为西方列强列强侵略目标，英国为扭转贸易逆差大量走私鸦片，林则徐虎门销烟后，英国以此为借口发动发动战争。",
    contents: [
      "中国开始沦为半殖民地半封建社会，社会性质发生根本变化。",
      "是近代史的起点，因为中国社会性质、主要矛盾、革命任务发生变化，中国人民开始反帝反封建的民主革命历程。",
      "中国出现资本主义生产关系，是不完全的封建社会。",
      "签订了《南京条约》。",
      "后续产生了工人阶级、资产阶级，其中一部分是官僚买办资本家（代表帝国、封建），另一部分是民族资本家（反帝反封建时是友军），小资不剥削所以不是资产阶级"
    ]
  }
},

 {
    year: 1841,
    label: "广州三元里人民抗英斗争",
    description: {
      background: "1841年，英军在广州郊区烧杀抢掠，无恶不作，激起当地民众的强烈愤慨，三元里一带人民率先举起反抗旗帜。",
      contents: [
        "中国近代史上中国人民第一次大规模的反侵略武装斗争",
      ]
    }
  },

{
    year: 1898,
    label: "义和团运动",
    description: {
      background: "19世纪末，帝国主义瓜分中国狂潮加剧，民族危机空前严重，外国传教士在中国欺压百姓，激起民众强烈不满。",
      contents: [
        
        "笼统排外只打洋人"
      ]
    }
  },




 {
    year: 1851,
    label: "太平天国运动",
    description: {
      background: "鸦片战争后清政府加重剥削，列强入侵导致自然经济解体，农民生活困苦；洪秀全创立“拜上帝会”发动群众。",
      contents: [
        "打击了封建统治阶级",
        "《天朝田亩制度》体现社会理想和农民起义特色的纲领，耕者有其田",
        "纲领反封不反帝，实际反封又反帝",
        "代表农民，失败主要是阶级局限性（所以运动失败的根本原因）",
      ]
    }
  },

  {
    year: 1894,
    label: "中日甲午战争",
    description: {
      background: "日本明治维新后走上扩张道路，制定以中国为目标的“大陆政策”；清政府政治腐败、军备废弛，洋务运动未触及根本制度；列强对日本侵略采取纵容态度。",
      contents: [
        "签订《马关条约》，割让辽东半岛、台湾及澎湖列岛，赔偿白银2亿两",
        "之后人民民族意识普遍觉醒（五四运动后全面觉醒）",
        "之后列强掀起瓜分狂潮"
      ]
    }
  },

{
    year: 1861,
    label: "洋务运动",
    description: {
      background: "19世纪60年代初第二次鸦片战争结束后，清政府面临太平天国起义和列强入侵的内忧外患，洋务派为维护封建统治，主张学习西方技术以自强求富。",
      contents: [
        "中体西用，学经济不学体制",
        "自强办江南制造总局、福州船政局等军用企业，办军用钱不够材料不足就求富创办轮船招商局等民用企业",
        "创办翻译学堂、军事学堂等新式学堂（没法政的），派遣留学生赴美欧学习",
        "失败因为阶级局限性，代表封建阶级"
      ]
    }
  },

 {
    year: 1898,
    label: "戊戌维新运动",
    description: {
      background: "甲午战争后民族危机民族危机空前严重，中国民族资本主义初步发展，资产阶级新兴民族资产阶级资产阶级为救亡图存，主张通过行君主立宪制改革。",
      contents: [
        "学日本君主立宪制",
        "与守旧派就“要不要变法”“要不要兴民权”等问题展开开展论战",
        "资产阶级性质的自上而下的改良运动",
        "失败因为阶级局限性，守旧势力也大",
      ]
    }
  },



 {
        "year": 1900,
        "label": "八国联军侵华",
        "description": {
            "background": "19世纪末，西方列强进入帝国主义阶段，对海外市场和原料需求迫切，中国在甲午战败后国力衰微、民族危机加深，义和团运动兴起并反对外国侵略，冲击了列强在华利益，引起列强强烈不满，清政府对义和团态度摇摆不定，成为八国联军侵华的导火索。",
            "contents": [
             
                "《辛丑条约》的签订标志着中国完全沦为半殖民地半封建社会，清政府完全成为帝国主义统治中国的工具。"
            ]
        }
    },



  {
        "year": 1911.5,
        "label": "武昌起义",
        "description": {
            "background": "《辛丑条约》签订后，中国民族危机加深，社会矛盾激化，清末“新政”未能挽救统治危机，反而加重人民负担；资产阶级革命思想广泛传播，革命团体不断涌现，湖北新军中的共进会和文学社积极开展革命活动，保路运动的爆发为武昌起义提供了有利契机。",
            "contents": [
                "武昌起义的胜利，极大地鼓舞了全国各地的革命力量，引发了全国范围内的响应，许多省份纷纷宣布独立，清王朝的统治摇摇欲坠。"
            ]
        }
    },
    {
        "year": 1911,
        "label": "辛亥革命",
        "description": {
            "background": "19世纪末20世纪初，中国民族资本主义初步发展，民族资产阶级力量逐渐壮大，他们迫切要求摆脱帝国主义和封建主义的束缚；甲午战争失败后，民族危机空前严重，维新变法失败、义和团运动被镇压，使得越来越多的人认识到，只有通过革命推翻清王朝，才能挽救民族危亡；兴中会、华兴会、光复会等资产阶级革命团体相继成立，1905年中国同盟会在日本东京成立，以三民主义为革命纲领，为辛亥革命奠定了组织和思想基础。",
            "contents": [
			    "孙中山组建第一个革命团体兴中会（只是团体），同盟会是第一个资产阶级革命的政党，资产阶级革命开始于鸦片战争，进入新阶段于同盟会",
				"三民主义：民族——驱除鞑虏振兴中华，民权——政治革命，推翻封建君主专制，民生——社会革命，平均地权（土地增值归公，是国有思想）",
                "从1911年武昌起义爆发开始，全国各地纷纷响应，掀起了推翻清王朝统治的革命浪潮，多个省份宣布独立。",
                "中华民国临时政府在南京成立，孙中山就任临时大总统，宣告中华民国成立。",
                "标志着在中国延续两千多年的封建君主专制制度结束。但随后，革命果实被袁世凯窃取，他就任临时大总统，建立起北洋军阀的统治。",
                "辛亥革命是资产阶级民主革命，结束了封建君主专制制度",
				"失败原因：根本是资本主义建国行不通，"
			
            ]
        }
    },


 {
    year: 1912,
    label: "袁世凯窃取辛亥革命果实",
    description: {
      background: "辛亥革命后，清政府统治阶级力量涣散，缺乏统一领导；帝国主义列强为维护在华利益，积极扶持袁世凯；袁世凯掌握北洋军实权，通过政治手腕迫使革命党人妥协。",
      contents: [
      
        "标志着辛亥革命成果被篡夺，中国进入北洋军阀统治时期"
      ]
    }
  },


{
    year: 1915,
    label: "新文化运动",
    description: {
      background: "辛亥革命失败后，封建思想文化仍根深蒂固，袁世凯推行尊孔复古逆流，先进知识分子为探索救国道路发起思想启蒙运动。",
      contents: [
        "陈独秀在上海创办《青年杂志》（后改名《新青年》），标志运动开始",
        "以民主（德先生）和科学（赛先生）为口号，反对专制迷信、封建礼教",
        "理性批判孔学并不全盘否定",
        "五四以前的新文化运动提倡的是资产阶级民主主义，没有思想武器，走精英路线，无辩证法。",
        "动摇封建思想统治地位，促进思想解放，为五四运动和中共成立奠定思想基础"
      ]
    }
  },
  {
    year: 1919,
    label: "五四运动",
    description: {
      background: "1919年巴黎和会中国外交失败，列强将德国在山东权益转交日本，消息传回国内引发民众强烈愤慨。",
      contents: [
        "新民主主义革命的开端",
        "初期斗争主力是学生，后来向工人转移。是彻底的反帝反封建的伟大爱国运动",
        "中华民族意识全面觉醒（甲午中日战争之后是普遍觉醒）",
        "李大钊的《我的马克思主义》标志马主义系统传播，五四以后是广泛传播",
        "五四以后的新文化运动马克思主义开始发挥指导作用，争取人民群众的社会解放",
	
      ]
    }
  },
  {
    year: 1921,
    label: "中国共产党成立",
    description: {
      background: "马克思主义广泛传播并与工人运动相结合，各地共产党早期组织相继建立，革命需要统一领导核心。",
      contents: [
        "中共一大召开，确定名为中国共产党，制定了第一个纲领",
        "区别于第二国际社会民主主义（非暴力的马）的新型工人阶级政党",
        "一成立就有：新领导力量、新征程、新精神、世界新命运和格局。",
        "但没有：反帝反封建的民主革命纲领（二大提出）、革命新道路（农村包围城市....）、没提出马中结合命题（六届六中）、没把农村当做工作重点",
        "初心和使命：为人民谋幸福，为中华民族谋复兴",
		"百年奋斗牺牲创造的主题：中华民族伟大复兴",
      ]
    }
  },
  {
    year: 1924,
    label: "第一次国共合作",
    description: {
      background: "中共认识到建立统一战线重要性，孙中山在革命受挫后转向联俄联共，1923年中共三大确定合作方针。",
      contents: [
        "1924年国民党一大召开，确立“联俄、联共、扶助农工”三大政策，标志合作正式形成",
        "新三民主义是合作的政治基础，是同中共在民主革命阶段的纲领基本一致的",
		"新三民：民族突出了反帝（原是驱除鞑虏），民权一般平民共有，民生耕者有其田"
      ]
    }
  },
 { year: 1925, label: "大革命",  description:{
      background: "半殖民地半封建社会矛盾尖锐的背景下，国民党联合共产党开展的一场反帝反封建的全国性革命运动。该时期受五四运动和新文化运动影响，推动了国共合作和北伐战争的爆发，旨在结束军阀割据，实现国家统一和民族独立。",
      contents: [
        "五卅运动为开始标志",
        "失败原因：陈独秀代表的右倾机会主义放弃了领导权，没将马和中结合起来（只要失败，就是根本原因），共产国际瞎指挥（遵义会议以前都有的原因）",
        "共产党是大革命统一战线倡导者组织者，领导者是国民党",
		"初步探索了马中结合（六届六中提出命题）"]} },



{
    year: 1927,
    label: "八七会议",
    description: {
      background: "1927年蒋介石、汪精卫先后发动反革命政变，大革命失败，大批共产党员和革命群众遇害，革命陷入低潮。党亟需总结教训，纠正错误路线，确定新方针以挽救革命。",
      contents: [
        "彻底清算了大革命后期的陈独秀右倾机会主义错误",
        "确定了土地革命和武装反抗国民党反动统治的总方针",
        "明确提出土地革命是中国资产阶级民主革命的中心问题",
        "毛泽东在会议发言中强调党“以后要非常注意军事，须知政权是由枪杆子中取得的”",
        "实际上提出了以军事斗争作为党的工作重心的问题",
        "选出了以瞿秋白为首的中央临时政治局",
        "补充说明：中国革命从此开始了从大革命失败到土地革命战争兴起的转折",
        "关键词：清算陈独秀错误，反抗国民党，枪杆子里出政权，转折点"
      ]
    }
  },
  {
    year: 1927.3,
    label: "南昌起义",
    description: {
      background: "国民党背叛革命后实行白色恐怖，党为反抗屠杀、挽救革命，决定发动武装起义。",
      contents: [
        
        "打响武装反抗国民党反动统治的第一枪",
        "是中国共产党独立领导革命战争、创建人民军队的开端",
		"党指挥枪发端于南昌起义 奠基于三湾改编 定型于古田会议"
        
      ]
    }
  },
  {
    year: 1927.6,
    label: "秋收起义与井冈山根据地建立",
    description: {
      background: "八七会议后，毛泽东奉命领导湘赣边界武装起义，探索新的革命道路。",
      contents: [
        "首次打出“工农革命军”旗帜",
        "进行三湾改编确立党对军队领导，是新型人民进队的重要开端（在古典会议定性）",
			"党指挥枪发端于南昌起义 奠基于三湾改编 定型于古田会议",
        "创建中国第一个农村革命根据地——井冈山革命根据地",
        "开辟了农村包围城市、武装夺取政权的正确革命道路",
   
      ]
    }
  },
  {
    year: 1935,
    label: "遵义会议",
    description: {
      background: "红军长征途中，第五次反'围剿'失败后，革命形势极为严峻。党和红军面临生死存亡考验，亟需纠正军事和组织上的错误，确立正确的领导核心和战略方针。",
      contents: [
   
        "集中解决军事和组织问题（思想问题在延安整风运动解决、政治问题瓦窑堡解决），结束“左”倾教条主义在中央的统治",
        "事实上确立了毛泽东在党中央和红军的领导地位，开始确立以毛泽东为主要代表的马克思主义正确路线在党中央的领导地位，开始形成以毛泽东同志为核心的第一代中央领导集体",
        "开启了中国共产党独立自主解决中国革命实际问题的新阶段",
        "是党的历史上生死攸关的转折点，标志党在政治上开始走向成熟",
      ]
    }
  },
  

 {
    year: 1931,
    label: "九一八事变",
    description: {
      background: "日本为摆脱经济危机、实现大陆政策，蓄意制造事端侵略中国东北。",
      contents: [
        "抗日战争的起点，世界反法西斯战争的开端",

      ]
    }
  },
{
  year: 1935,
  label: "瓦窑堡会议",
  description: {
     background: "九一八事变后，民族危机日益加深，全国抗日救亡运动高涨。但党内存在'左'倾关门主义错误倾向，不利于团结一切抗日力量，亟需制定正确的政治路线和策略。",
      contents: [
	    "提出建立抗日民族统一战线的方针（政治问题解决）",
        "批判了'左'倾冒险主义、关门主义错误倾向，强调共产党在抗日民族统一战线中的领导作用",
	  
    ]
  }
},

  {
    year: 1936,
    label: "西安事变",
    description: {
      background: "蒋介石坚持“攘外必先安内”政策，张杨二人多次劝谏无效，民族危机加剧。",
      contents: [
        "标志十年内战内战基本结束，抗日民族统一战线初步形成"
      ]
    }
  },

 {
    year: 1937,
    label: "七七卢沟桥事变",
    description: {
      background: "日本企图以武力吞并全中国，蓄意在华北制造事端。",
      contents: [
        "进入全民族抗战，开辟世界反法西斯东方主战场",
   
      ]
    }
  },

 {
    year: 1937,
    label: "平型关大捷",
    description: {
      background: "日军进攻山西北部，企图夺取太原，八路军开赴抗日前线。",
      contents: [
  
        "是全民族抗战以来中国军队的第一次重大胜利",
        "打破“日军不可战胜”神话"
      ]
    }
  },

{
  year: 1942,
  label: "延安整风运动",
  description: {
    background: "抗日战争进入相持阶段后，党内存在主观主义、宗派主义、党八股等非无产阶级思想，特别是教条主义残余影响，亟需统一全党思想以迎接抗战胜利。",
    contents: [
    
      "主要内容是反对主观主义以整顿学风（最主要任务）、反对宗派主义以整顿党风、反对党八股以整顿文风。（整教条主义是重点）",
      "确立了实事求是的思想路线（解决思想问题）"
    ]
  }
},
{
    year: 1945,
    label: "日本投降",
    description: {
      background: "世界反法西斯战争胜利推进，苏联出兵中国东北，美国投下原子弹。",
      contents: [
        "日本天皇宣布接受波茨坦公告，签署投降书（台湾岛及澎湖列岛回归）",
        "抗日战争完全胜利的标志：岛回归",
        "胜利原因：决定性是爱国主义为核心的民族精神，关键是共产党中流砥柱的作用，重要法宝是全民族抗战",
		"抗战胜利是近代以来从危机走向伟大复兴转折点"
     
      ]
    }
  },
  
   {
    year: 1945,
    label: "重庆谈判",
    description: {
      background: "抗日战争胜利后，全国渴望和平民主，国民党假意和谈实则准备内战，试图消灭共产党领导的革命力量。",
      contents: [
     
        "签署《双十协定》，确立和平建国方针，同意“长期合作，坚决避免内战”",
        "但国民党很快撕毁协议，积极准备内战"
      ]
    }
  },
  {
    year: 1946,
    label: "全面内战爆发",
    description: {
      background: "国民党完成内战准备后，撕毁政协协议，决心以武力消灭共产党及其领导的解放区。",
      contents: [
     "解放战争三阶段：防御、进攻、决战，解放军进攻是国民党发展到消亡转折点。决战占领南京摧毁了国军力量",
  
      ]
    }
  },
  
    {
    year: 1949,
    label: "中华人民共和国成立",
    description: {
      background: "新民主主义革命取得胜利，推翻了帝国主义、封建主义和官僚资本主义的统治。",
      contents: [
        "标志着中国新民主主义革命的基本胜利，半殖民地半封建社会结束",
 
      ]
    }
  },
  
   {
    year: 1950,
    label: "抗美援朝战争",
    description: {
      background: "1950年6月朝鲜内战爆发，美国出兵干涉并越过‘三八线’，威胁中国东北边境安全，同时派舰队队进入台湾海峡。",
      contents: [
        "打破美国不可战胜神话"
      ]
    }
  },
  
  
{
    year: 1951,
    label: "三反五反运动",
    description: {
      background: "部分干部受资产阶级腐蚀出现贪污浪费现象，不法资本家通过行贿、偷税等手段牟取暴利，危害国家经济。",
      contents: [
        "三反运动：在党政机关开展反贪污、反浪费、反官僚主义斗争",
        "五反运动：在私营工商业中开展反行贿、反偷税漏税、反盗骗国家财产、反偷工减料、反盗窃国家经济情报斗争",
        "是群众性运动",
       
      ]
    }
  },
  
   {
    year: 1953,
    label: "第一个五年计划",
    description: {
      background: "新中国工业基础极其薄弱，1949年现代工业产值仅占国民经济总产值的17%，重工业几乎空白。",
      contents: [
        "集中力量发展重工业，建立国家工业化和国防现代化的初步基础",
     
   
      ]
    }
  },
  
    {
    year: 1952,
    label: "三大改造",
    description: {
      background: "为适应工业化建设需要，必须变革生产资料私有制，建立社会主义公有制。",
      contents: [
        "农业：通过互助组→初级农业生产合作社→高级社的步骤实现集体化",
        "手工业：采取生产合作小组→供销合作社→生产合作社的改造路径",
        "资本主义工商业：通过国家资本主义形式（加工订货→统购包销→公私合营）实现和平赎买",
        "改造完成标志着社会主义制度在中国基本建立，进入社会主义初级阶段"
      ]
    }
  },
  
  
  
  
  
  
  
  
  
 ],
 
 
 
 
   //---------------------------------------------------------------------------------------------------------------------------------------------------
    periods: [
	  { start: 1840, end: 1925, label: "国家出入早期探索(1840——1925)",  description:{
      background: "",
      contents: [
        ]} },
	
      { start: 1925, end: 1927, label: "大革命时期(1925——1927)",  description:{
      background: "半殖民地半封建社会矛盾尖锐的背景下，国民党联合共产党开展的一场反帝反封建的全国性革命运动。该时期受五四运动和新文化运动影响，推动了国共合作和北伐战争的爆发，旨在结束军阀割据，实现国家统一和民族独立。",
      contents: [
        "五卅运动为开始标志",
        "失败原因：陈独秀代表的右倾机会主义放弃了领导权，没将马和中结合起来（只要失败，就是根本原因），共产国际瞎指挥（遵义会议以前都有的原因）",
        "共产党是大革命统一战线倡导者组织者，领导者是国民党",
		"初步探索了马中结合（六届六中提出命题）"]} },
		
		 { start: 1927, end: 1937, label: "土地革命战争时期（1927–1937）)",  description:{
      background: "大革命失败后，国共合作破裂，中国共产党转入地下，开始在农村发动土地革命，建立革命根据地，进行武装斗争。面对国民党“围剿”,1934年，中央红军第五次反“围剿”失败，被迫实行战略大转移，开始二万五千里长征，揭开了革命的新阶段。",
      contents: [
        "八七会议确定土改和武装起义总方针，清算陈独秀右倾错误，毛提出枪杆子出政权，是大革命---土地革命转折点",
        "南昌起义反国民党第一枪，党指挥枪的开端。秋收起义转向农村，期间毛进行三湾改编是新型人民军队的开端",
        "古田会议对新型人民军队、党指挥枪进行定性",
		"土地改革：耕者有其田，限制富农",
		"中华苏维埃共和国在瑞金成立是第一个全国性工农民主政权",
		"失败原因：三次左倾，第三次王明代表的教条主义，共产国际瞎指挥，没有马中结合。",
		"遵义会议：中国革命历史性转折、生死攸关转折点，解决军事、组织问题（无政治问题），确立毛领导地位，开始独立自主、不再听共产国际瞎指挥",
		"长征胜利宣告国民党消灭共产党图谋失败，是共产党革命事业挫折走向胜利伟大转折"]} },
     
   { start: 1937, end: 1945, label: "抗日战争时期(1937——1945)",  description:{
      background: "九一八事变后，日本加紧侵略中国，逐步蚕食华北；1937年卢沟桥事变爆发，标志全国抗战全面开始。中华民族面临生死存亡的严重危机。中国共产党主张停止内战，建立抗日民族统一战线，实现国共第二次合作。",
      contents: [
        "918事变是抗日起点、揭开世界反法西斯序幕",
        "一二·九运动标志抗日救亡运动新高潮到来",
        "瓦窑堡会议:建立广泛抗日民族统一战线（政治问题）",
		"西安事变内战结束，之后国共合作抗日",
		"七七卢沟桥事变进入全面抗战，开辟世界反法西斯东方主战场",
		"共产党是抗日战争中流砥柱",
		"抗战三阶段：防御、相持（最关键）、反攻",
		"共产党全面抗战路线，国民党片面抗战路线。共产党敌后战场，国民党正面战场",
		"抗日根据地建设首要、根本任务是政权建设。土地政策耕者有其田，减租减息（各退让一步），富农允许收租",
		"六届六中提出马中结合的命题，巩固毛领导地位，纠正王明右倾错误（反对统一战线中独立自主）",
		"新民主主义理论系统阐明，标志毛思想趋于成熟",
		"延安整风：整顿主观主义（主任务）、教条主义（重点）",
		"中共七大:政治路线，三大优良作风，确立毛思想并写入党章确立指导地位，标志党政治、思想、组织走向成熟"]} },
		

 { start: 1945, end: 1949, label: "解放战争时期(1945——1949)",  description:{
      background: "抗战胜利后，国共为争夺国家政权矛盾激化，虽曾谈判但最终破裂。1946年全面内战爆发，国民党腐败失民心，中共依靠土地改革和群众支持逐步取得优势，最终赢得全国胜利。",
      contents: [
        "解放战争三阶段：防御、进攻、决战，解放军进攻是国民党发展到消亡转折点。决战占领南京摧毁了国军力量",
        "土地政策：五四指示，耕者有其田，征收富农对于土地或不变",
		"共产党与民主党派团结合作，革命纲领一致，政治协商格局形成"]} },
		
		
		 { start: 1949, end: 1956, label: "社会主义改造时期（1949——1956）",  description:{
      background: "新中国成立初期，国内经济基础薄弱，面临着恢复国民经济、巩固新生政权的艰巨任务。在国际上，以美国为首的资本主义阵营对新中国采取封锁、孤立的政策。经过三年的努力，国民经济得到初步恢复，政权也得以巩固 。然而，分散、脆弱的个体农业和手工业，以及不利于国计民生的资本主义工商业，难以满足国家工业化建设的需求。同时，社会主义性质的国营经济在国民经济中的比重不断增加，工人阶级领导的人民民主专政政权日益巩固，为社会主义改造提供了政治保障。在此背景下，为了实现社会主义工业化，建立社会主义基本制度，党适时提出了过渡时期总路线，开启了对农业、手工业和资本主义工商业的社会主义改造。",
      contents: [
        "1949-1953 年，土地改革废除封建土地制度，让农民获地，保存富农经济；镇压反革命运动肃清国民党残留势力；抗美援朝战争捍卫国家主权； “三反”“五反” 运动.",   
		"一五计划突出了集中主要力量发展重工业，建立国家工业化和国防现代化的初步基础的核心要点",
        "农业改造：从互助组、初级社到高级社，将个体农民生产资料私有制改造成集体所有制。",
		"手工业改造：从手工业生产小组、供销合作社到手工业生产合作社，实现个体经济向集体经济转变。",
		"资本主义工商业改造：从初级形式（控制两端）到高级形式（个别公私合营、全行业公私合营），将民族资本主义经济转为社会主义经济。"]} },
		
		 { start: 1956, end: 1978, label: "社会主义探索时期（1956——1978）",  description:{
      background: "1956 年，社会主义改造基本完成，社会主义制度在中国确立，我国进入全面建设社会主义的历史阶段。此时，如何在中国这样一个经济文化落后的东方大国建设社会主义，成为党和国家面临的重大课题。国际上，社会主义阵营与资本主义阵营对峙，我们需要探索适合中国国情的社会主义建设道路，以巩固和发展社会主义制度。",
      contents: [
        "毛泽东大<论十大关系>提出马中国“第二次结合” ，在改革开放完成了飞跃，第一次是在六届六中提出马中结合，在七大完成飞跃——毛泽东思想",   
		"《论十大关系》《关于正确处理人民内部矛盾的问题》的发表、整风运动"
       ]} },
	   
	   	 { start: 1978, end: 2012, label: "改革开放时期（1978——2012）",  description:{
      background: "“文化大革命” 结束后，党和国家的工作在徘徊中前进。“两个凡是” 的错误方针严重束缚了人们的思想，阻碍了各项事业的发展。同时，世界范围内新科技革命蓬勃兴起，发达国家纷纷进行产业结构调整，许多发展中国家也在寻找适合本国国情的发展道路。在这种形势下，我国迫切需要解放思想，实事求是，探索适合中国国情的社会主义现代化建设新道路。",
      contents: [
        "关于真理标准问题的讨论，继五四运动、延安整风运动之后又一场马克思主义思想解放运动。",   
		"中共十一届三中全会的伟大转折、拨乱反正任务、邓小平南方谈话"
       ]} },

 	 { start: 2012, end: 2035, label: "中国特色社会主义新时代（2012——？？？）",  description:{
      background: "中国特色社会主义进入新时代，国内经济发展进入新常态，结构优化、质量提升，社会主要矛盾转变，结构多元，科技在创新驱动下不断进步，数字化转型加速，文化繁荣自信但价值多元。",
      contents: [
       
       ]} },





 ],
	
	  //---------------------------------------------------------------------------------------------------------------------------------------------------
    writings: [
      {
    year: 1925,
    label: "《中国社会各阶级的分析》",
    description: {
      background: "五卅运动后，革命高潮兴起，统一战线内部阶级分化加剧，亟需明确革命的依靠力量和打击对象，解决中国革命的首要问题。",
      contents: [
        "指出分清敌友是革命的首要问题。'中国过去一切革命斗争成效甚少，其基本原因就是因为不能团结真正的朋友，以攻击真正的敌人'",
        "补充说明：提出了新民主主义革命的基本思想",
        "关键词：分清敌友"
      ]
    }
  },
  {
    year: 1926,
    label: "《国民革命与农民运动》",
    description: {
      background: "国民革命逐步推向高潮，农民运动在南方各省蓬勃发展，但党内对农民运动的重要性认识不一，需要从理论上阐明农民问题在革命中的地位。",
      contents: [
        "指出'农民问题乃国民革命的中心问题'，'所谓国民革命运动，其大部分即是农民运动'",
        "补充说明：提出了新民主主义革命的基本思想",
        "关键词：国民革命中心问题"
      ]
    }
  },
  {
    year: 1927,
    label: "《湖南农民运动考察报告》",
    description: {
      background: "农民运动迅猛发展引发社会广泛关注，出现了对农民运动的种种责难和误解，毛泽东通过实地考察，为农民运动正名并阐明其重大意义。",
      contents: [
        "进一步解决了无产阶级正确对待农民这个最主要同盟军的重大原则问题",
        "补充说明：提出了新民主主义革命的基本思想",
        "关键词：农民同盟军"
      ]
    }
  },
  
  {
    year: 1928,
    label: "《中国的红色政权为什么能够存在？》《井冈山的斗争》",
    description: {
      background: "秋收起义后，革命根据地逐步建立，但红色政权能否长期存在成为党内关注的焦点，需要从理论上回答红色政权存在的可能性。",
      contents: [
        "论证了红色政权能够长期存在并发展的主客观条件",
        "提出了工农武装割据的思想，即土地革命、武装斗争和根据地建设的有机结合",
        "关键词：工农武装割据"
      ]
    }
  },
  {
    year: 1930,
    label: "《星星之火之火，可以燎原》",
    description: {
      background: "革命处于低潮时期，党内存在'红旗到底打得多久'的悲观思想，需要澄清对革命前途的认识，坚定革命信心。",
      contents: [
        "指出红军、游击队和红色区域的建立和发展，是半殖民地中国在无产阶级领导下的农民斗争的最高形式",
        "指出红色政权是促进全国革命高潮的最重要因素",
        "补充说明：初步形成了农村包围城市、武装夺取政权的革命道路理论",
        "关键词：初步形成革命道路理论"
      ]
    }
  },
  {
    year: 1930.5,
    label: "《反对本本主义》",
    description: {
      background: "党内内存在严重教条主义倾向，盲目照搬共产国际决议和苏联经验，忽视中国实际情况，亟需确立正确的思想路线。",
      contents: [
        "阐明了坚持辩证唯物主义的思想路线即理论与实际相结合原则的极端重要性",
        "提出'没有调查，没有发言权'的重要思想",
        "提出'中国革命斗争的胜利要靠中国同志了解中国情况'的重要思想",
        "关键词：没有调查，没有发言权"
      ]
    }
  },
  {
    year: 1935,
    label: "《论反对日本帝国主义的策略》",
    description: {
      background: "华北事变后，民族危机空前严重，抗日救亡运动高涨，亟需制定适应新形势的抗日民族统一战线策略。",
      contents: [
        "阐明党的抗日民族统一战线的新政策",
        "批判党内的关门主义和对于革命的急性病",
        "系统说明了党的政治策略上的诸问题",
        "补充说明：与瓦窑堡会议的考点基本一致",
        "关键词：抗日民族统一战线；政治策略"
      ]
    }
  },
  {
    year: 1936,
    label: "《中国革命战争的战略问题》",
    description: {
      background: "长征胜利后，需要总结土地革命战争时期党在军事路线上的经验教训，统一全党军事思想，为抗日战争作理论准备。",
      contents: [
        "总结土地革命战争中党内在军事问题上的争论",
        "系统说明了有关中国革命战争战略方面的诸问题",
        "关键词：总结军事争论"
      ]
    }
  },
    
	  {
    year: 1937,
    label: "《实践论》《矛盾论》",
    description: {
      background: "抗日战争爆发后，党内内教条主义和经验主义等主观主义倾向仍依然存在，需要从哲学高度清算错误思想，确立正确的思想方法。",
      contents: [
        "总结中国共产党的历史经验，揭露和批评党内的主观主义尤其是尤其是教条主义错误",
        "深入论证马克思列宁主义基本原理同中国具体实际相结合的原则",
        "科学阐明了党的马克思主义思想路线",
        "关键词：认识论；科学阐明思想路线"
      ]
    }
  },
  {
    year: 1938,
    label: "《论持久战》",
    description: {
      background: "抗战初期，'亡国论'和'速胜论'等错误观点盛行，扰乱人心，亟需科学分析抗日战争的进程和前途，指明抗战的正确道路。",
      contents: [
        "系统地阐明了持久抗战的总方针",
        "科学预见了抗日战争的发展进程，指出战略相持阶段是中国抗日战争取得最后胜利的最关键阶段",
        "提出'兵民是胜利之本'的重要思想",
        "补充说明：中国共产党领导抗日战争的纲领性文献",
        "关键词：战略相持最关键；兵民"
      ]
    }
  },
  {
    year: 1938.3,
    label: "《论新阶段》",
    description: {
      background: "抗日战争进入相持阶段，需要总结抗战以来的经验，明确党在新阶段的任务，解决马克思主义如何与中国实际相结合的问题。",
      contents: [
        "明确提出了'马克思主义的中国化'的命题",
        "补充说明：中共六届六中全会上的文献",
        "关键词：提出'马中化'"
      ]
    }
  },
  {
    year: 1938.6,
    label: "《战争和战略问题》",
    description: {
      background: "党内存在轻视武装斗争、幻想依靠国民党取得抗战胜利的错误倾向，需要从理论上阐明武装斗争在中国革命中的重要地位。",
      contents: [
        "确立了经过长期武装斗争，先占乡村，后取城市，最后夺取全国胜利的革命道路",
        "补充说明：中共六届六中全会上的文献",
        "关键词：确立中国革命道路"
      ]
    }
  },
  {
    year: 1939,
    label: "《〈共产党人〉发刊词》",
    description: {
      background: "抗日战争进入相持阶段，党需要总结十八年来革命斗争的经验，明确战胜敌人的基本武器和法宝，加强党的建设。",
      contents: [
        "提出了中国革命胜利的'三大法宝'：统一战线、武装斗争和党的建设",
        "补充说明：新民主主义革命理论的系统阐明",
        "关键词：三大法宝"
      ]
    }
  },
  {
    year: 1939.5,
    label: "《中国革命和中国共产党》",
    description: {
      background: "随着抗日战争的发展，需要向全党和全国人民阐明中国革命的基本理论和规律，明确革命的性质、对象、动力和前途。",
      contents: [
        "第一次提出了'新民主主义革命'的科学概念",
        "论述了民主革命和社会主义革命的关系",
        "补充说明：新民主主义革命理论的系统阐明",
        "关键词：第一次提出'新民主主义革命'"
      ]
    }
  },
  {
    year: 1940,
    label: "《新民主主义论》",
    description: {
      background: "国民党顽固派发动反共高潮，在思想文化领域宣扬'一个主义、一个政党、一个领袖'，需要系统阐述中国共产党的建国主张，批判错误理论。",
      contents: [
        "阐述了新民主主义的政治、经济和文化纲领",
        "指出新民主主义革命是无产阶级领导的、人民大众的、反对帝国主义、封建主义和官僚资本主义的革命",
        "补充说明：新民主主义革命理论的系统阐明",
        "关键词：新民主主义政治经济文化"
      ]
    }
  },
  {
    year: 1941,
    label: "《改造我们的学习》",
    description: {
      background: "党内存在主观主义、宗派主义等不良作风，影响党的团结和革命事业发展，延安整风运动即将展开，需要从思想上进行动员。",
      contents: [
        "分析和批评了当时党内存在的主观主义、宗派主义等非马克思列宁主义的思想倾向",
        "对实事求是作了新的解释，强调'实事求是'是马克思主义的思想精髓",
        "补充说明：整风运动首先在党的高级干部中进行",
        "关键词：实事求是；整风"
      ]
    }
  },
  {
    year: 1942,
    label: "《整顿党的作风》",
    description: {
      background: "延安整风运动全面展开，需要明确整风的任务和方法，解决党内存在的作风问题，提高党的战斗力。",
      contents: [
        "着重阐述了整顿党的作风的重要性",
        "提出整风的任务是反对主观主义以整顿学风，反对宗派主义以整顿党风，反对党八股以整顿文风",
        "补充说明：整风运动在全党范围普遍展开",
        "关键词：反对三风；整风"
      ]
    }
  },
  {
    year: 1942.5,
    label: "《反对党八股》",
    description: {
      background: "党内存在形式主义的文风，党八股束缚思想、影响工作，需要清算这种不良文风，树立生动活泼、新鲜有力的马克思主义文风。",
      contents: [
        "指出党八股不但不便于表现革命精神，而且非常容易使革命精神窒息",
        "列举了党八股的八大罪状，提出了克服党八股的方法",
        "补充说明：整风运动在全党范围普遍展开",
        "关键词：反对党八股；整风"
      ]
    }
  },
  {
    year: 1945,
    label: "《论联合政府》",
    description: {
      background: "抗日战争即将胜利，中国面临两种前途、两种命运的抉择，需要明确党的建国主张，提出争取光明前途的具体纲领。",
      contents: [
        "把新民主主义的政治、经济和文化与党的基本纲领联系起来，进行了具体阐述",
        "把党在长期奋斗中形成的优良作风概括为三大作风：理论和实践相结合的作风、和人民群众紧密联系在一起的作风、自我批评的作风",
        "补充说明：中共七大上的文献",
        "关键词：新民主主义基本纲领；三大作风"
      ]
    }
  },
  {
    year: 1945.5,
    label: "《愚公移山》",
    description: {
      background: "中共七大即将闭幕，需要总结会议精神，鼓舞全党全国人民的斗志，为夺取抗日战争和新民主主义革命的胜利而奋斗。",
      contents: [
        "充分肯定了党的七大是团结的大会、胜利的大会",
        "号召全党发扬愚公移山的精神，下定决心，不怕牺牲，排除万难，去争取胜利",
        "补充说明：中共七大上的文献",
        "关键词：团结的大会、胜利的大会"
      ]
    }
  },
  
  // 解放战争时期
  {
    year: 1949,
    label: "《论人民民主专政》",
    description: {
      background: "新民主主义革命即将胜利，新中国即将成立，需要阐明新中国的国家性质、政权组织形式和基本政策，为建国作理论准备。",
      contents: [
        "指出资产阶级共和国的方案在中国是行不通的",
        "指出人民民主专政需要工人阶级的领导，基础是工人阶级、农民阶级和城市小资产阶级的联盟",
        "指出总结我们的经验，集中到一点，就是工人阶级（经过共产党）领导的以工农联盟为基础的人民民主专政",
        "补充说明：与中共七届二中全会的决议一起构成了《中国人民政治协商会议共同纲领》的基础",
        "关键词：资本主义行不通；工人领导；以工农为基础；人民民主专政"
      ]
    }
  },
  
  // 新中国时期
  {
    year: 1956,
    label: "《论十大关系》",
    description: {
      background: "社会主义改造基本完成，社会主义建设即将全面展开，需要总结苏联建设的经验教训，探索适合中国国情的社会主义建设道路。",
      contents: [
        "确定了基本方针：'努力把党内党外、国内国外的一切积极的因素，直接的、间接的积极因素，全部调动起来'",
        "指出需要实现马克思主义与中国实际的'第二次结合'",
        "明确提出要以苏为鉴，独立自主地探索适合中国情况的社会主义建设道路",
        "补充说明：标志着党探索中国社会主义建设道路的良好开端",
        "关键词：调动积极因素；开始'第二次结合'；以苏为鉴，开始探索道路"
      ]
    }
  },
  {
    year: 1957,
    label: "《关于正确处理人民内部矛盾的问题》",
    description: {
      background: "社会主义改造完成后，国内阶级关系发生根本变化，人民内部矛盾逐渐显现并成为国家政治生活的主题，需要正确认识和处理这一矛盾。",
      contents: [
        "指出社会主义社会存在着敌我矛盾和人民内部矛盾两类不同性质的社会矛盾",
        "提出把正确处理人民内部矛盾作为国家政治生活的主题",
        "指出社会主义社会基本矛盾是非对抗性的，可以通过社会主义制度的自我调整和完善解决",
        "明确提出了中国工业化道路的问题，主要是指重工业和轻工业、农业的发展关系问题",
        "关键词：两类矛盾；政治生活主题；民主和专政；工业化道路问题"
      ]
    }
  },
  {
    year: 1957.5,
    label: "《一九五七年夏季的形势》",
    description: {
      background: "整风运动和反右派斗争展开后，需要明确社会主义建设时期的政治目标，创造有利于社会主义事业发展的政治局面。",
      contents: [
        "提出要造成一个又有集中又有民主，又有纪律又有自由，又有统一意志，又有个人心情舒畅、生动活泼的政治局面（通称'六又'政治局面）",
        "关键词：六又政治局面"
      ]
    }}
	  
	  
	  
	  
	  
	  
    ],
	
	  //---------------------------------------------------------------------------------------------------------------------------------------------------
    meetings: [
  
    
	 { 
    year: 1921, 
    label: "中共一大", 
    description: {
      background: "20世纪20年代，马克思主义在中国广泛传播，各地共产主义小组相继成立，为建党奠定思想和组织基础。中国工人运动持续发展，迫切需要先进政党领导，在共产国际帮助下，各地共产主义者代表齐聚上海召开会议，后转移至浙江嘉兴南湖。",
      contents: [
        "确定党的名称为“中国共产党”",
        "确立党的纲领：以无产阶级革命军队推翻资产阶级",
        "决定首先集中精力组织工人",
        "选举产生了党的临时领导机构——中央局",
        "关键词：党的名称，最高纲领"
      ]
    } 
  },
  { 
    year: 1922, 
    label: "中共二大", 
    description: {
      background: "中共一大后，党在革命实践中认识到中国社会的半殖民地半封建性质，需明确阶段性纲领。当时帝国主义侵略加剧，军阀割据混战，人民困苦，制定符合国情的革命纲领成为迫切需求。",
      contents: [
        "第一次提出了反帝反封建的民主革命纲领",
        "明确党在现阶段的最低纲领：打倒军阀；推翻国际帝国主义的压迫；统一中国为真正民主共和国",
        "提出党的最高纲领是实现共产主义",
        "必须联合全国一切革命党派，联合资产阶级民主派，组成“民主主义的联合战线”",
        "开始采取群众路线的方法",
        "关键词：反帝反封建，统一战线思想，群众路线"
      ]
    } 
  },
  { 
    year: 1923, 
    label: "中共三大", 
    description: {
      background: "1923年京汉铁路工人大罢工遭军阀镇压，使党认识到单独依靠工人阶级力量难以完成革命任务。此时孙中山领导的国民党也在寻求革命同盟，国共合作条件逐渐成熟。",
      contents: [
        "正式决定共产党员以个人身份加入国民党，同孙中山领导的国民党建立统一战线",
        "明确规定共产党员加入国民党时，党必须在政治上、思想上、组织上保持自己的独立性",
        "关键词：决定加入，必须保持独立性"
      ]
    } 
  },
  { 
    year: 1925, 
    label: "中共四大", 
    description: {
      background: "随着国民革命运动兴起，统一战线形成，革命形势高涨。但无产阶级与资产阶级领导权之争凸显，农民阶级的革命作用被认识，亟需在理论和政策上明确。",
      contents: [
        "第一次明确提出了无产阶级在民主革命中的领导权问题",
        "首次提出工农联盟问题，强调农民是无产阶级的重要同盟军",
        "关键词：领导权，工农联盟"
      ]
    } 
  },
  { 
    year: 1927, 
    label: "八七会议", 
    description: {
      background: "1927年蒋介石、汪精卫先后发动反革命政变，大革命失败，大批共产党员和革命群众遇害，革命陷入低潮。党亟需总结教训，纠正错误路线，确定新方针以挽救革命。",
      contents: [
        "彻底清算了大革命后期的陈独秀右倾机会主义错误",
        "确定了土地革命和武装反抗国民党反动统治的总方针",
        "明确提出土地革命是中国资产阶级民主革命的中心问题",
        "毛泽东在会议发言中强调党“以后要非常注意军事，须知政权是由枪杆子中取得的”",
        "实际上提出了以军事斗争作为党的工作重心的问题",
        "选出了以瞿秋白为首的中央临时政治局",
        "补充说明：中国革命从此开始了从大革命失败到土地革命战争兴起的转折",
        "关键词：清算陈独秀错误，反抗国民党，枪杆子里出政权，转折点"
      ]
    } 
  },
  { 
    year: 1929, 
    label: "古田会议", 
    description: {
      background: "红军长期在农村发展，部队成分以农民和小资产阶级为主，存在单纯军事观点等非无产阶级思想，影响军队战斗力和党的领导，亟需解决红军建设和党的建设问题。",
      contents: [
        "确立了思想建党、政治建军原则",
        "规定红军是一个执行革命的政治任务的武装集团，必须绝对服从共产党的领导",
        "必须担负打仗、筹款和做群众工作的任务",
        "必须加强政治工作",
        "关键词：思想建党，政治建军，党领导军队"
      ]
    } 
  },
  { 
    year: 1931, 
    label: "中华苏维埃第一次全国代表大会", 
    description: {
      background: "随着农村革命根据地发展壮大，政权建设成为重要任务。为统一各根据地政权组织，明确苏维埃政权性质、纲领和政策，团结全国工农群众斗争，召开了此次大会。",
      contents: [
        "通过了《中华苏维埃共和国宪法大纲》",
        "中华苏维埃共和国实行工农兵代表大会制度",
        "选举产生了中华苏维埃共和国中央执行委员会和中央人民政府",
        "制定了土地法、劳动法等重要法律，保障工农群众利益",
        "关键词：工农兵代表大会制度，苏维埃宪法大纲"
      ]
    } 
  },

 { 
    year: 1935, 
    label: "遵义会议", 
    description: {
      background: "红军长征途中，第五次反'围剿'失败后，革命形势极为严峻。党和红军面临生死存亡考验，亟需纠正军事和组织上的错误，确立正确的领导核心和战略方针。",
      contents: [
        "集中解决了当时具有决定意义的军事问题和组织问题",
        "由张闻天代替博古负总的责任",
        "事实上确立了毛泽东在党中央和红军的领导地位，开始确立以毛泽东为主要代表的马克思主义正确路线在党中央的领导地位，开始形成以毛泽东同志为核心的第一代中央领导集体",
        "开启了中国共产党独立自主解决中国革命实际问题的新阶段",
        "关键词：军事问题和组织问题，开始独立自主"
      ]
    } 
  },
  { 
    year: 1935.5, 
    label: "瓦窑堡会议", 
    description: {
      background: "九一八事变后，民族危机日益加深，全国抗日救亡运动高涨。但党内存在'左'倾关门主义错误倾向，不利于团结一切抗日力量，亟需制定正确的政治路线和策略。",
      contents: [
        "阐明建立抗日民族统一战线的可能性",
        "批判了'左'倾冒险主义、关门主义错误倾向，强调共产党在抗日民族统一战线中的领导作用",
        "规定了建立广泛的抗日民族统一战线的具体政策，决定用'人民共和国'口号代替'工农共和国'",
        "补充说明：内容和《反对日本帝国主义的策略》基本一致",
        "关键词：抗日民族统一战线，解决政治路线问题"
      ]
    } 
  },
  { 
    year: 1937, 
    label: "洛川会议", 
    description: {
      background: "七七事变后全国抗战爆发，为制定全面抗战路线和战略方针，动员全民族力量争取抗战胜利，需解决国共合作后如何坚持抗战、争取胜利的关键问题。",
      contents: [
        "主张实行全面抗战路线，即人民战争路线",
        "制定了抗日救国十大纲领，强调要打倒日本帝国主义，关键在于使已经发动的抗战成为全面的全民族抗战",
        "关键词：全面抗战路线"
      ]
    } 
  },
  { 
    year: 1938, 
    label: "中共六届六中全会", 
    description: {
      background: "抗日战争进入相持阶段后，党内出现王明右倾错误，主张'一切经过统一战线'放弃领导权，亟需纠正错误，明确党在抗日战争中的路线、方针和政策。",
      contents: [
        "明确提出了'马克思主义的中国化'命题",
        "确立了经过长期武装斗争，先占乡村，后取城市，最后夺取全国胜利的革命道路",
        "基本纠正了王明的右倾错误",
        "补充说明：进一步巩固了毛泽东在全党的领导地位，统一了全党的思想和步调",
        "关键词：提出'马中化'，确立革命道路"
      ]
    } 
  },
  { 
    year: 1944, 
    label: "中共六届七中全会", 
    description: {
      background: "抗日战争即将胜利之际，为总结党的历史经验，对土地革命战争时期的路线是非作出正式结论，澄清历史认识，为党的七大召开做好准备。",
      contents: [
        "原则通过了《关于若干历史问题的决议》",
        "使全党特别是党的高级干部对中国革命基本问题的认识达到了一致",
        "补充说明：标志着延安整风运动的胜利结束",
        "关键词：第一个'历史决议'"
      ]
    } 
  },
  { 
    year: 1945, 
    label: "中共七大", 
    description: {
      background: "抗日战争即将胜利，中国面临两种前途、两种命运的决战。为团结全党全国人民争取光明前途，彻底打败日本侵略者，建立独立、自由、民主、统一与富强的新中国。",
      contents: [
        "制定了党的政治路线：放手发动群众，壮大人民力量，在我党的领导下，打败日本侵略者，解放全国人民，建立一个新民主主义的中国",
        "把党在长期奋斗中形成的优良作风概括为三大作风：理论和实践相结合的作风、和人民群众紧密联系在一起的作风、自我批评的作风",
        "正式命名毛泽东思想，并将毛泽东思想规定为党的一切工作的指针",
        "标志着党在政治上思想上组织上走向成熟：在政治上，为建立新民主主义的新中国制定了正确路线方针政策；在思想上，党确立了毛泽东思想在全党的指导地位，把毛泽东思想载入了党章；在组织上，党形成了一支高举毛泽东旗帜的久经考验的政治家集团",
		"补充说明，经过整风运动和七大，实事求是思想路线在全党得到确立",
        "关键词：政治路线、三大作风、确立毛思想、完全成熟"
      ]
    } 
  },
  
   { 
    year: 1949, 
    label: "中共七届二中全会", 
    description: {
      background: "三大战役胜利结束，国民党反动统治即将被推翻，中国革命处于全国胜利的前夜。此时需要明确党在全国胜利后的基本政策，以及由新民主主义社会向社会主义社会过渡的相关问题。",
      contents: [
        "提出了迅速夺取全国胜利的方针",
        "指出党的工作重心必须由乡村转移到城市",
        "指出了中国由农业国转变为工业国、由新民主主义社会转变为社会主义社会的发展方向",
        "提出了“两个务必”的思想，即“务必使同志们继续地保持谦虚、谨慎、不骄、不躁的作风，务必使同志们继续地保持艰苦奋斗的作风”",
        "关键词：工作重心：乡村转城市"
      ]
    } 
  },
  { 
    year: 1949.5, 
    label: "中国人民政治协商会议", 
    description: {
      background: "新中国成立前夕，为了筹备建立新中国，需要召开一次具有广泛代表性的政治协商会议，讨论新中国的建国纲领、国家机构设置等重大问题。",
      contents: [
        "通过了《中国人民政治协商会议组织法》《中华人民共和国中央人民政府组织法》和《中国人民政治协商会议共同纲领》，这三个文件被认为是为中华人民共和国奠基的历史性文件",
        "补充说明：确立了新型政党制度",
        "关键词：《共同纲领》"
      ]
    } 
  },
  { 
    year: 1950, 
    label: "中共七届三中全会", 
    description: {
      background: "新中国成立初期，面临着巩固新生政权、恢复国民经济等一系列紧迫任务。当时国家财政经济状况困难，需要制定正确的策略来争取国家财政经济状况的基本好转。",
      contents: [
        "确定了当时全党和全国人民的中心任务：在三年左右的时间内，争取国家财政经济状况的基本好转",
        "制定了党在中华人民共和国成立初期的战略策略方针：不要四面出击",
        "关键词：恢复经济；不要四面出击"
      ]
    } 
  },
  { 
    year: 1956, 
    label: "中共八大", 
    description: {
      background: "社会主义改造基本完成，社会主义制度在我国基本建立起来。此时需要对国内主要矛盾和主要任务作出正确判断，以明确党和国家的工作重点。",
      contents: [
        "指出社会主义制度在我国已经基本上建立起来，国内主要矛盾已经是人民对于经济文化迅速发展的需要同当前经济文化不能满足人民需要的状况之间的矛盾",
        "指出全国人民的主要任务是集中力量发展社会生产力，实现国家工业化，逐步满足人民日益增长的物质和文化需要",
        "指出根本任务已经是在新的生产关系下保护和发展生产力",
        "坚持党中央提出的既反保守又反冒进，即在综合平衡中稳步前进的经济建设方针",
        "肯定了“三个主体，三个补充”思想",
        "关键词：根本任务：发展生产力，主要矛盾，综合平衡"
      ]
    } 
  },
  { 
    year: 1978, 
    label: "中共十一届三中全会", 
    description: {
      background: "“文化大革命”结束后，党和国家面临着在思想、政治、组织等领域进行全面拨乱反正的任务。当时“两个凡是”的错误方针束缚着人们的思想，阻碍着各项事业的发展。",
      contents: [
        "彻底否定了“两个凡是”的错误方针，果断停止使用“以阶级斗争为纲”的口号",
        "高度评价了关于真理标准问题的讨论，重新确立了马克思主义的思想路线、政治路线和组织路线",
        "决定把全党的工作重心转移到社会主义现代化建设上来和实行改革开放的战略决策",
        "形成了以邓小平同志为核心的党中央领导集体",
        "开始了拨乱反正",
        "补充说明：开启了改革开放和社会主义现代化建设新时期",
        "关键词：结束“两个凡是”；重新确立所有路线；工作重心转向现代化建设；开始拨乱反正"
      ]
    } 
  },
  
   {
    year: 1981,
    label: "中共十一届六中全会",
    description: {
      background: "“文化大革命”结束后，党需要对新中国成立以来的历史经验和教训进行全面总结，科学评价毛泽东同志的历史地位，正确认识毛泽东思想，以统一全党思想，推动社会主义事业发展。",
      contents: [
        "科学评价了毛泽东和毛泽东思想的历史地位",
        "提出了毛泽东思想的活的灵魂是“实事求是、群众路线、独立自主”",
        "第一次使用“社会主义初级阶段”的提法",
        "完成了党在指导思想上的拨乱反正",
        "对我国社会主要矛盾作了科学表述：人民日益增长的物质文化需要同落后的社会生产之间的矛盾",
        "通过《关于建国以来党的若干历史问题的决议》",
        "补充说明：和《关于建国以来党的若干历史问题的决议》的考点基本一致",
        "关键词：科学评价毛泽东；活的灵魂；“初级阶段”提法；完成拨乱反正；第二个“历史决议”"
      ]
    }
  },
  {
    year: 1982,
    label: "中共十二大",
    description: {
      background: "在拨乱反正任务基本完成、改革开放和现代化建设初步展开的历史条件下，党需要明确新的历史时期的总任务和奋斗目标，提出符合国情的理论和路线方针政策。",
      contents: [
        "“中国特色社会主义”成为我们党的全部理论和实践创新的主题",
        "关键词：“中特”主题"
      ]
    }
  },
  {
    year: 1987,
    label: "中共十三大",
    description: {
      background: "随着改革开放的深入，社会主义现代化建设面临着一系列新情况、新问题，需要从理论和实践上进一步明确社会主义初级阶段的理论和党的基本路线。",
      contents: [
        "第一次对“社会主义初级阶段”理论作了系统阐述",
        "提出了社会主义初级阶段“一个中心、两个基本点”的基本路线",
        "第一次对中国特色社会主义理论的主要内容作了系统概括",
        "邓小平理论轮廓形成",
        "关键词：“初级阶段”系统阐述；基本路线；“中特”理论系统概括；轮廓"
      ]
    }
  },
  {
    year: 1992,
    label: "中共十四大",
    description: {
      background: "国际国内形势发生深刻变化，社会主义市场经济体制的建立成为经济体制改革的关键目标，需要进一步明确改革的方向和目标，推动改革开放和现代化建设进入新阶段。",
      contents: [
        "明确了建立社会主义市场经济体制的改革目标",
        "高度评价了邓小平对开创中国特色社会主义理论的贡献",
        "关键词：确立市场经济体制改革目标；评价邓小平"
      ]
    }
  },
  {
    year: 1997,
    label: "中共十五大",
    description: {
      background: "世纪之交，中国特色社会主义事业进入关键时期，需要把邓小平理论确立为党的指导思想，明确党在社会主义初级阶段的基本纲领，为跨世纪发展指明方向。",
      contents: [
        "把邓小平理论写入党章",
        "指出“公有制为主体、多种所有制经济共同发展”是我国社会主义初级阶段的一项基本经济制度",
        "关键词：邓小平理论写入党章"
      ]
    }
  },
  {
    year: 2012,
    label: "中共十八大",
    description: {
      background: "进入新世纪新阶段，我国发展呈现一系列新的阶段性特征，面临着前所未有的机遇和挑战。需要总结过去十年的工作和党的十六大以来的实践，明确今后一个时期党和国家的发展方向、目标任务和重大举措。",
      contents: [
        "将中国特色社会主义事业总体布局从“四位一体”扩展为“五位一体”",
        "补充说明：中共十八大以来，中国特色社会主义进入新时代",
        "关键词：总体布局扩展为“五位一体”"
      ]
    }
  },
  {
    year: 2013,
    label: "中共十八届三中全会",
    description: {
      background: "全面深化改革是解决我国发展面临的一系列突出矛盾和问题的关键，需要在新的历史起点上对全面深化改革作出系统部署，明确改革的总目标、任务和路径。",
      contents: [
        "通过了《中共中央关于全面深化改革若干重大问题的决定》",
        "实现了改革由局部探索、破冰突围到系统集成、全面深化的转变，开创了我国改革开放新局面",
        "关键词：全面深化改革若干重大问题决定；改革新局面"
      ]
    }
  },
  {
    year: 2017,
    label: "中共十九大",
    description: {
      background: "中国特色社会主义进入新时代，我国社会主要矛盾发生转化，需要对新时代的历史方位、社会主要矛盾、党的使命任务等作出科学判断和全面部署。",
      contents: [
        "把“坚定维护以习近平同志为核心的党中央权威和集中统一领导”写入党章",
        "把习近平新时代中国特色社会主义思想确立为党的指导思想并写入党章",
        "提出了党的政治建设这个重大命题，把党的政治建设纳入党的建设总体布局并摆在首位",
        "指出我国社会主要矛盾已经转化为人民日益增长的美好生活需要和不平衡不充分的发展之间的矛盾",
        "指出中国特色社会主义进入了新时代，这是我国发展新的历史方位",
        "补充说明：中共十九大作出了“中国特色社会主义进入新时代”的重大政治判断",
        "关键词：维护党中央权威和集中统一领导；习近平新时代中国特色社会主义思想；党的政治建设；社会主要矛盾转化；新时代"
      ]
    }
  },
  {
    year: 2022,
    label: "中共二十大",
    description: {
      background: "在全面建设社会主义现代化国家新征程、向第二个百年奋斗目标进军的关键时刻，需要总结过去五年的工作和新时代十年的伟大变革，明确新征程党的使命任务，对全面建设社会主义现代化国家、全面推进中华民族伟大复兴作出战略部署。",
      contents: [
        "提出“三个务必”：全党同志务必不忘初心、牢记使命，务必谦虚谨慎、艰苦奋斗，务必敢于斗争、善于斗争",
        "提出十年来的“三件大事”：一是迎来中国共产党成立100周年；二是中国特色社会主义进入新时代；三是完成脱贫攻坚、全面建成小康社会的历史任务，实现第一个百年奋斗目标",
        "指出跳出治乱兴衰历史周期率的第二个答案：自我革命",
        "提出今后党的中心任务：从现在起，中国共产党的中心任务就是团结带领全国各族人民全面建成社会主义现代化强国、实现第二个百年奋斗目标，以中国式现代化全面推进中华民族伟大复兴",
        "提出“两个结合”：把马克思主义基本原理同中国具体实际相结合、同中华优秀传统文化相结合",
        "关键词：“三个务必”；“三件大事”；自我革命；中心任务；“两个结合”"
      ]
    }
  },
  {
    year: 2024,
    label: "中共二十届三中全会",
    description: {
      background: "在全面建设社会主义现代化国家新征程中，进一步全面深化改革是推进中国式现代化的强大动力，需要对进一步全面深化改革作出总体部署，明确目标任务和政策举措。",
      contents: [
        "通过了《中共中央关于进一步全面深化改革、推进中国式现代化的决定》",
        "指出进一步全面深化改革的总目标：继续完善和发展中国特色社会主义制度，推进国家治理体系和治理能力现代化",
        "提出2035年全面建成高水平社会主义市场经济体制的目标",
        "关键词：进一步全面深化改革；2035年目标：全面建成高水平社会主义市场经济体制"
      ]
    }
  }



  ],
    //---------------------------------------------------------------------------------------------------------------------------------------------------
    significances: [
      { year: 1953, label: "确立社会主义基本制度", description: "完成三大改造，中国进入社会主义社会，是制度转型的重要标志。" },
      { year: 1978, label: "改革开放历史转折", description: "从计划经济转向市场经济，中国走上快速发展道路。" },
      { year: 2012, label: "中国特色社会主义进入新时代", description: "中国发展站上新起点，全面深化改革与民族复兴新阶段。" }
  







  ],
	
	  //---------------------------------------------------------------------------------------------------------------------------------------------------
	nationalConditions: [
  { year: 1982, label: "社会主义初级阶段", description:{
      background: "中华人民共和国成立背景：1949年新中国成立。",
      contents: [
        "标志中国进入社会主义初级阶段。",
        "是新中国成立的重要标志是新中是新中国成立的重要标志。是新中国成立的重要标志。国成立的重要标志。是新中国成立的重要标志。是要标。",
        "开启中国社会主义新纪元。"]} }
		
		
		
		
		
		
		
		
		
		
],

  };
const categoryVisible = {
  event: true,
  period: true,
  writing: true,
  meeting: true,
  significance: true,
  task: true,
  nationalCondition: true
};


  const timeline = document.getElementById("timeline");
  const timelineWrapper = document.getElementById("timeline-wrapper");
  const popup = document.getElementById("popup");
  const popupTitle = document.getElementById("popup-title");
  const popupDesc = document.getElementById("popup-desc");

  let scale = 80; // 每年宽度（像素）
  const minScale = 20;
  const maxScale = 200;

  // 新增：时间轴版本号，每次生成时间轴时自增
  let timelineVersion = 0;

  // 搜索相关变量，新增 searchVersion 用于对比版本
  let searchVersion = -1;
  let searchResults = [];
  let searchIndex = -1;  // 初始为 -1 表示无当前选中
  let lastKeywords = [];

function generateTimeline() {
  timelineVersion++; // 版本号自增，表示重建了所有节点
  timeline.innerHTML = "";

  const categoryLines = {
    event: 73,
    writing: 127,
    period: 167,
    meeting: 207,
    significance: 247,
	nationalCondition: 287,
	task: 327
  };

  for (const [category, top] of Object.entries(categoryLines)) {
    const line = document.createElement("div");
    line.className = "separator-line";
    line.style.top = (top - 10) + "px"; // 稍微往上偏移一点，让它在条目上方
    timeline.appendChild(line);
  }

  // 年份1820-2050
  for(let year = 1820; year <= 2050; year++) {
    const yDiv = document.createElement("div");
    yDiv.className = "year";
    yDiv.style.left = (year - 1820) * scale + "px";

    if (scale < 35) {
      yDiv.innerText = `'${String(year).slice(-2)}`;
      yDiv.style.fontSize = "14px";
    } else {
      yDiv.innerText = year;
      yDiv.style.fontSize = "14px";
    }

    timeline.appendChild(yDiv);
  }

  // 添加时期（区间型）
data.periods.forEach(item => {
  const div = document.createElement("div");
  div.className = "entry period";
  div.style.left = (item.start - 1820) * scale + "px";
  div.style.top = "70px";  // 根据你的设计放置高度
  div.style.width = ((item.end - item.start + 0.5) * scale - 10) + "px";
  div.innerText = item.label;
  div.setAttribute("data-category", "period");

  if (!categoryVisible["period"]) {
    div.classList.add("hidden");
  }

  if (item.description) {
    const tooltip = document.createElement("div");
    tooltip.className = "tooltip";
    tooltip.innerText = item.description;
    div.appendChild(tooltip);
  }

  div.onclick = (e) => {
    e.stopPropagation();
    popupTitle.innerText = item.label;

    if (item.description && typeof item.description === "object") {
      // 如果描述是对象，格式化显示
      let html = `<div style="font-size:18px; color:#f4a261; font-weight:bold; margin-bottom:10px;">背景逻辑：</div>`;
      html += `<div style="font-size:14px; color:#000; margin-bottom:20px;">${item.description.background || ''}</div>`;

      html += `<div style="font-size:18px; color:#66ccff; font-weight:bold; margin-bottom:10px;">内容说明：</div>`;
      html += `<ol style="font-size:14px; color:#000; padding-left: 20px; margin:0;">`;

      (item.description.contents || []).forEach(line => {
        html += `<li style="margin-bottom:6px;">${line}</li>`;
      });

      html += `</ol>`;

      popupDesc.innerHTML = html;
    } else {
      popupDesc.innerText = item.description || "无详细信息";
    }

    popup.style.display = "block";
  };

  timeline.appendChild(div);
});

// 添加任务（区间型）
data.tasks.forEach(item => {
  const div = document.createElement("div");
  div.className = "entry task";
  div.style.left = (item.start - 1820) * scale + "px";
  div.style.top = "325px";  // 根据你的设计放置高度
  div.style.width = ((item.end - item.start + 1) * scale - 10) + "px";
  div.innerText = item.label;
  div.setAttribute("data-category", "task");

  if (!categoryVisible["task"]) {
    div.classList.add("hidden");
  }

  if (item.description) {
    const tooltip = document.createElement("div");
    tooltip.className = "tooltip";
    tooltip.innerText = item.description;
    div.appendChild(tooltip);
  }

  div.onclick = (e) => {
    e.stopPropagation();
    popupTitle.innerText = item.label;

    if (item.description && typeof item.description === "object") {
      // 如果描述是对象，格式化显示
      let html = `<div style="font-size:18px; color:#f4a261; font-weight:bold; margin-bottom:10px;">背景逻辑：</div>`;
      html += `<div style="font-size:14px; color:#000; margin-bottom:20px;">${item.description.background || ''}</div>`;

      html += `<div style="font-size:18px; color:#66ccff; font-weight:bold; margin-bottom:10px;">内容说明：</div>`;
      html += `<ol style="font-size:14px; color:#000; padding-left: 20px; margin:0;">`;

      (item.description.contents || []).forEach(line => {
        html += `<li style="margin-bottom:6px;">${line}</li>`;
      });

      html += `</ol>`;

      popupDesc.innerHTML = html;
    } else {
      popupDesc.innerText = item.description || "无详细信息";
    }

    popup.style.display = "block";
  };

  timeline.appendChild(div);
});

  // 添加其他单点事件
  ["events", "writings", "meetings", "significances","nationalConditions"].forEach(category => {
    const topPositions = { events: 160, writings: 120, meetings: 200, significances: 240,nationalConditions: 280 };
    data[category].forEach(item => {
      const div = document.createElement("div");
      const categoryName = category.slice(0, -1); // 去掉复数的 s
      div.className = `entry ${categoryName}`;
      div.style.left = (item.year - 1820) * scale + "px";
      div.style.top = topPositions[category] + "px";
      div.innerText = item.label;
      div.setAttribute("data-category", categoryName);

      // 根据当前显示状态设置隐藏
      if (!categoryVisible[categoryName]) {
        div.classList.add("hidden");
      }

      if (item.description) {
        const tooltip = document.createElement("div");
        tooltip.className = "tooltip";
        tooltip.innerText = item.description;
        div.appendChild(tooltip);
      }

    div.onclick = (e) => {
  e.stopPropagation();
  popupTitle.innerText = item.label;

  if (item.description && typeof item.description === "object") {
    let html = `<div style="font-size:18px; color:#f4a261; font-weight:bold; margin-bottom:10px;">背景逻辑：</div>`;
    html += `<div style="font-size:14px; color:#000; margin-bottom:20px;">${item.description.background || ''}</div>`;

    html += `<div style="font-size:18px; color:#66ccff; font-weight:bold; margin-bottom:10px;">内容说明：</div>`;
    html += `<ol style="font-size:14px; color:#000; padding-left: 20px; margin:0;">`;

    (item.description.contents || []).forEach(line => {
      html += `<li style="margin-bottom:6px;">${line}</li>`;
    });

    html += `</ol>`;

    popupDesc.innerHTML = html;
  } else {
    popupDesc.innerText = item.description || "无详细信息";
  }

  popup.style.display = "block";
};

      timeline.appendChild(div);
    });
  });

  timeline.style.minWidth = ((2050 - 1820 + 1) * scale) + "px";
}


  // 放大或缩小时间轴
  function zoomTimeline(factor) {
    const wrapper = timelineWrapper;
    const prevScale = scale;
    const centerPixelBefore = wrapper.scrollLeft + wrapper.clientWidth / 2;
    const centerOffsetYear = centerPixelBefore / prevScale;
    scale = Math.min(maxScale, Math.max(minScale, scale * factor));
    generateTimeline();
    const centerPixelAfter = centerOffsetYear * scale;
    wrapper.scrollLeft = centerPixelAfter - wrapper.clientWidth / 2;
  }

  // 重置缩放
  function resetZoom() {
    scale = 80;
    const prevCenter = timelineWrapper.scrollLeft + timelineWrapper.clientWidth / 2;
  const centerRatio = prevCenter / timeline.scrollWidth;

  // 2. 重置缩放比例
  scale = 80;
  generateTimeline(); // 重新生成 timeline（会更新尺寸）

  // 3. 缩放后延迟设置 scrollLeft（确保 DOM 渲染完成）
  setTimeout(() => {
    const newCenter = timeline.scrollWidth * centerRatio;
    timelineWrapper.scrollLeft = newCenter - timelineWrapper.clientWidth / 2;
  }, 0);
}

  // 自动滚动居中到某年份
  function centerToYear(year) {
    const wrapperWidth = timelineWrapper.clientWidth;
    const scrollLeft = (year - 1820) * scale - wrapperWidth / 2 + 40;
    timelineWrapper.scrollLeft = scrollLeft > 0 ? scrollLeft : 0;
  }

  // 关闭弹窗
  function closePopup() {
    popup.style.display = "none";
  }

  // 点击空白关闭弹窗
  document.body.onclick = () => {
    closePopup();
  };

  // 阻止弹窗内点击关闭
  popup.onclick = (e) => {
    e.stopPropagation();
  };

  // 搜索辅助函数
  function normalizeText(text) {
    return text.toLowerCase();
  }

  function searchEntries(keywords) {
    const allEntries = document.querySelectorAll(".entry");
    const results = [];

    allEntries.forEach(entry => {
      const text = normalizeText(entry.innerText);
      const matched = keywords.every(kw => text.includes(kw));
      if (matched) results.push(entry);
    });

    return results;
  }

  function updateSearchInfo() {
    const info = document.getElementById("searchInfo");
    if (searchResults.length === 0) {
      info.innerText = "无匹配结果";
    } else {
      info.innerText = `共找到${searchResults.length}条，当前第${searchIndex + 1}条`;
    }
  }

  function highlightEntry(index) {
    const allEntries = document.querySelectorAll(".entry");
    allEntries.forEach(entry => entry.classList.remove("highlight"));

    if (searchResults.length === 0 || index < 0 || index >= searchResults.length) return;

    const current = searchResults[index];
    current.classList.add("highlight");

    current.scrollIntoView({behavior: "smooth", block: "center", inline: "center"});

    updateSearchInfo();
  }
function searchNext() {
  const input = document.getElementById("searchInput");
  const keywordStr = input.value.trim();

  if (!keywordStr) {
    alert("请输入关键词！");
    return;
  }

  const keywords = keywordStr.toLowerCase().split(/\s+/);

  if (JSON.stringify(keywords) !== JSON.stringify(lastKeywords) || searchVersion !== timelineVersion) {
    // 关键词或时间轴变了，重新搜索
    searchResults = searchEntries(keywords);
    if (searchResults.length === 0) {
      alert("没有找到相关事件！");
      document.getElementById("searchInfo").innerText = "无匹配结果";
      lastKeywords = [];
      searchVersion = timelineVersion;
      searchIndex = -1;
      return;
    }
    searchIndex = 0;
    lastKeywords = keywords;
    searchVersion = timelineVersion;
    highlightEntry(searchIndex);
  } else {
    if (searchResults.length === 0) return;
    searchIndex = (searchIndex + 1) % searchResults.length;
    highlightEntry(searchIndex);
  }
}

function searchPrev() {
  const input = document.getElementById("searchInput");
  const keywordStr = input.value.trim();

  if (!keywordStr) {
    alert("请输入关键词！");
    return;
  }

  const keywords = keywordStr.toLowerCase().split(/\s+/);

  if (JSON.stringify(keywords) !== JSON.stringify(lastKeywords) || searchVersion !== timelineVersion) {
    // 关键词或时间轴变了，重新搜索
    searchResults = searchEntries(keywords);
    if (searchResults.length === 0) {
      alert("没有找到相关事件！");
      document.getElementById("searchInfo").innerText = "无匹配结果";
      lastKeywords = [];
      searchVersion = timelineVersion;
      searchIndex = -1;
      return;
    }
    searchIndex = searchResults.length - 1; // 上一条第一次跳到最后一条
    lastKeywords = keywords;
    searchVersion = timelineVersion;
    highlightEntry(searchIndex);
  } else {
    if (searchResults.length === 0) return;
    if (searchIndex === -1) {
      // 第一次点击上一条时从最后一条开始
      searchIndex = searchResults.length - 1;
    } else {
      searchIndex = (searchIndex - 1 + searchResults.length) % searchResults.length;
    }
    highlightEntry(searchIndex);
  }
}
  // 初始化
  generateTimeline();
  centerToYear(2050);
  
  function toggleCategory(category, btn) {
  categoryVisible[category] = !categoryVisible[category];
  const elems = document.querySelectorAll(`[data-category="${category}"]`);
  elems.forEach(el => {
    if (categoryVisible[category]) {
      el.classList.remove("hidden");
    } else {
      el.classList.add("hidden");
    }
  });
  btn.classList.toggle("btn-toggled");
}


function exportTimelineRange() {
  const startYearInput = document.getElementById("exportStartYear");
  const endYearInput = document.getElementById("exportEndYear");

  let startYear = parseInt(startYearInput.value);
  let endYear = parseInt(endYearInput.value);

  if (isNaN(startYear) || isNaN(endYear)) {
    alert("请输入有效的开始和结束年份！");
    return;
  }
  if (startYear < 1820) startYear = 1820;
  if (endYear > 2050) endYear = 2050;
  if (startYear > endYear) {
    alert("开始年份不能大于结束年份！");
    return;
  }

  const widthPx = (endYear - startYear + 1) * scale;
  const heightPx = timelineWrapper.clientHeight;
  const offsetPx = (startYear - 1820) * scale;

  // 克隆 timeline-wrapper（带滚动条和边框）
  const wrapperClone = timelineWrapper.cloneNode(true);

  wrapperClone.style.position = "absolute";
  wrapperClone.style.top = "-9999px";
  wrapperClone.style.left = "0";
  wrapperClone.style.width = widthPx + "px";  // 只截取所需宽度
  wrapperClone.style.height = heightPx + "px";
  wrapperClone.style.overflow = "hidden";   // 隐藏超出部分

  document.body.appendChild(wrapperClone);

  // 设置克隆容器的滚动位置，偏移到开始年份位置
  wrapperClone.scrollLeft = offsetPx;

  // 截图时 scrollX 置 0，因为滚动条是容器本身的
  html2canvas(wrapperClone, {
    width: widthPx,
    height: heightPx,
    windowWidth: widthPx,
    windowHeight: heightPx,
    scrollX: 0,
    scrollY: 0,
    backgroundColor: "#fff",
  }).then(canvas => {
    document.body.removeChild(wrapperClone);

    const link = document.createElement("a");
    link.download = `timeline_${startYear}_${endYear}.png`;
    link.href = canvas.toDataURL("image/png");
    link.click();
  }).catch(err => {
    alert("截图失败：" + err);
  });
}

</script>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</body>
</html>